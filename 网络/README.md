## 网络相关笔记

***

### TCP/IP网络模式

* 应用层
* 传输层
    - 两个传输协议：TCP(传输控制协议)和UDP
    - TCP特性：流量控制、超时重传、拥塞控制等；TCP最大报文段长度MSS
* 网络层
  结构： IP头部 TCP头部 数据块1
    - IP协议，将传输层的报文作为数据部分，再加上IP包头组装成IP报文，如果IP
      报文大小超过MTU（以太网中一般为1500字节）就会再次进行切片
    - 寻址
    - 路由
* 网络接口层
  通过MAC头部判断网络包目的地

#### TCP三次握手

SYN:建立连接 FIN:关闭连接 ACK:响应 PSH:有数据传输 RST:连接重置

* 客户端发起连接SYN，随机一个初始化序列号seq=x,设置SYN=1表示握手报文，
  之后处于SYN-SENT（同步已发送）状态
* 服务端收到发起的连接，随机生成一个初始序列号（server_isn）(seq=y),
  设置ack=x+1,设置SYN=1和ACK=1，表示是一个SYN握手和ACK确认应答报文，
  返回SYN，并且ACK客户端SYN，之后处于SYN-RCVD（同步已接收）状态
* 客户端收到服务端发送的SYN和ACK之后，将ACK置为1，表示是一个应答报文，设置ack=y+1，
  表示收到了服务器的y之前的数据，发送对SYN确认的ACK，之后处于ESTABLISHED（连接已建立）状态，因为
  已经一发一送成功了
* 服务端收到ACK之后，处于ESTABLISHED状态，因为也已经一法一送状态